<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>留学交流论坛</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .forum-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #333333, #4A4A4A);
            padding-top: 80px;
            color: #fff;
        }

        .forum-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .forum-header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease;
        }

        .forum-header h1 {
            font-size: 3em;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* 发帖按钮 */
        .new-post-btn {
            background: #4169E1;
            color: white;
            padding: 15px 35px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(65, 105, 225, 0.3);
        }

        .new-post-btn:hover {
            background: #3157c7;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(65, 105, 225, 0.4);
        }

        /* 添加折叠效果相关样式 */
        .post-content-wrapper {
            max-height: 100px;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            position: relative;
        }

        .post-content-wrapper.expanded {
            max-height: 1000px; /* 足够大的高度以显示完整内容 */
        }

        .post-content-fade {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.9));
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .expanded .post-content-fade {
            opacity: 0;
        }

        .expand-btn {
            color: #4169E1;
            cursor: pointer;
            padding: 5px 10px;
            margin: 10px 0;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            border: none;
            background: transparent;
            transition: all 0.3s ease;
        }

        .expand-btn:hover {
            color: #2750d6;
        }

        .expand-btn i {
            transition: transform 0.3s ease;
        }

        .expanded .expand-btn i {
            transform: rotate(180deg);
        }

        /* 改进帖子卡片样式 */
        .post-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.6s ease-out;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .post-title {
            font-size: 1.4em;
            color: #333;
            font-weight: 600;
        }

        .post-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #666;
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .author-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
        }

        .post-content {
            color: #444;
            line-height: 1.8;
            font-size: 1.1em;
            margin-bottom: 25px;
        }

        /* 帖子操作按钮 */
        .post-actions {
            display: flex;
            align-items: center;
            gap: 30px;
            padding: 15px 0;
            border-top: 1px solid #eee;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 15px;
            border-radius: 20px;
            background: transparent;
            border: none;
            font-size: 14px;
        }

        .action-btn:hover {
            color: #4169E1;
            background: rgba(65, 105, 225, 0.1);
            transform: translateY(-2px);
        }

        .action-btn i {
            font-size: 16px;
            width: 16px;
            text-align: center;
        }

        .action-btn span {
            line-height: 1;
            display: inline-block;
            vertical-align: middle;
        }

        /* 统一所有按钮的初始状态 */
        .action-btn.like-btn,
        .action-btn.comment-btn,
        .action-btn.share-btn {
            background: transparent;
            color: #666;
        }

        /* 统一所有按钮的悬停状态 */
        .action-btn:hover {
            color: #4169E1;
            background: rgba(65, 105, 225, 0.1);
            transform: translateY(-2px);
        }

        /* 改进评论区样式 */
        .comments-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            display: none;
            transition: all 0.3s ease;
        }

        .comments-section.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .comment {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .comment-input {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .comment-input input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #eee;
            border-radius: 25px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .comment-input input:focus {
            border-color: #4169E1;
            outline: none;
        }

        .comment-btn {
            background: #4169E1;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .comment-btn:hover {
            background: #2750d6;
            transform: scale(1.1);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .forum-header h1 {
                font-size: 2em;
            }

            .post-card {
                padding: 20px;
            }

            .post-actions {
                flex-wrap: wrap;
            }
        }

        /* 点赞动画效果 */
        .action-btn.liked i {
            animation: likeAnimation 0.5s ease;
            color: #ff4757;
        }

        @keyframes likeAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .post-author-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .author-details {
            display: flex;
            flex-direction: column;
        }

        .author-name {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .post-date {
            font-size: 0.9em;
            color: #666;
        }

        .post-title-section {
            margin-top: 15px;
        }

        .post-tags {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .tag {
            background: rgba(65, 105, 225, 0.1);
            color: #4169E1;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .tag:hover {
            background: rgba(65, 105, 225, 0.2);
            transform: translateY(-2px);
        }

        /* 评论区样式优化 */
        .comments-list {
            margin-bottom: 20px;
        }

        .comment {
            display: flex;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .comment-author {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .comment-content {
            flex: 1;
        }

        .comment-form {
            display: flex;
            gap: 15px;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .comment-input-wrapper {
            flex: 1;
            display: flex;
            gap: 10px;
            align-items: center;
            background: #f0f2f5;
            border-radius: 20px;
            padding: 8px 15px;
        }

        .comment-input {
            flex: 1;
            border: none;
            background: transparent;
            outline: none;
            font-size: 1em;
        }

        .send-comment-btn {
            background: none;
            border: none;
            color: #4169E1;
            cursor: pointer;
            padding: 5px;
            transition: transform 0.2s ease;
        }

        .send-comment-btn:hover {
            transform: scale(1.1);
        }

        /* 在 forum-container 中添加分类导航 */
        .forum-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .forum-nav {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .nav-item {
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: #4169E1;
        }

        /* 添加热门话题区域 */
        .hot-topics {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .hot-topics h2 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .topic-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .topic-tag {
            padding: 8px 15px;
            background: rgba(65, 105, 225, 0.2);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-tag:hover {
            background: rgba(65, 105, 225, 0.4);
            transform: translateY(-2px);
        }

        /* 修改帖子列表布局 */
        .forum-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 20px;
            margin-top: 30px;
        }

        .posts-section {
            width: 100%;
        }

        .post-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* 右侧发帖按钮 */
        .post-button-section {
            position: sticky;
            top: 100px;
            height: fit-content;
        }

        .create-post-btn {
            background-color: #4169E1;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(65, 105, 225, 0.2);
        }

        .create-post-btn:hover {
            background-color: #3157c7;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(65, 105, 225, 0.3);
        }

        .create-post-btn i {
            font-size: 18px;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .forum-content {
                grid-template-columns: 1fr;
            }

            .post-button-section {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 100;
            }

            .create-post-btn {
                padding: 12px 25px;
                border-radius: 25px;
            }
        }

        /* 添加发帖模态框 */
        .post-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .post-modal-content {
            position: relative;
            background-color: #333;
            margin: 5% auto;
            padding: 30px;
            width: 80%;
            max-width: 800px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            color: #fff;
            cursor: pointer;
        }

        .post-form {
            margin-top: 20px;
        }

        .tag-selection {
            margin-bottom: 20px;
        }

        .tag-selection span {
            color: #fff;
            margin-right: 10px;
        }

        .tag-btn {
            padding: 8px 15px;
            margin: 5px;
            border: none;
            border-radius: 20px;
            background: rgba(65, 105, 225, 0.2);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tag-btn.active {
            background: #4169E1;
        }

        .post-title {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 16px;
        }

        .post-content {
            width: 100%;
            height: 300px;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 16px;
            resize: vertical;
        }

        .post-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .preview-btn, .publish-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preview-btn {
            background: transparent;
            border: 2px solid #4169E1;
            color: #4169E1;
        }

        .publish-btn {
            background: #4169E1;
            color: white;
        }

        .preview-btn:hover, .publish-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        ::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* 修改工具栏布局 */
        .forum-tools {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin: 20px 0;
        }

        /* 修改搜索框样式 */
        .search-box {
            position: relative;
            flex: 1;
            max-width: 500px;
            height: 45px;
            display: flex;
            align-items: center;
        }

        .search-box input {
            width: 100%;
            height: 100%;
            padding: 0 45px 0 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
        }

        .search-box i {
            position: absolute;
            right: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
        }

        /* 修改发布按钮样式 */
        .new-post-btn {
            height: 45px;
            padding: 0 25px;
            background: #4169E1;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .new-post-btn:hover {
            background: #3157c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(65, 105, 225, 0.3);
        }

        /* 修改分类和筛选区域 */
        .forum-filters {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        .filter-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .filter-label {
            color: white;
            margin-right: 15px;
            font-weight: 500;
        }

        .filter-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: #4169E1;
        }

        /* 添加统一的动画效果和过渡 */
        .post-card {
            animation: fadeInUp 0.6s ease-out;
            transition: all 0.3s ease;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .action-btn {
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            color: #4169E1;
            background: rgba(65, 105, 225, 0.1);
            transform: translateY(-2px);
        }

        /* 点赞动画 */
        @keyframes likeAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .action-btn.liked i {
            animation: likeAnimation 0.5s ease;
            color: #ff4757;
        }

        /* 评论展开动画 */
        .comments-section {
            transition: all 0.3s ease;
        }

        .comments-section.show {
            animation: slideDown 0.3s ease;
        }

        /* 标签悬停效果 */
        .tag {
            transition: all 0.3s ease;
        }

        .tag:hover {
            background: rgba(65, 105, 225, 0.2);
            transform: translateY(-2px);
        }

        /* 统一的动画关键帧 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* 搜索框和按钮动画 */
        .search-box input {
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px rgba(65, 105, 225, 0.2);
        }

        .new-post-btn {
            transition: all 0.3s ease;
        }

        .new-post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(65, 105, 225, 0.3);
        }

        /* 分类标签动画 */
        .filter-btn {
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: #4169E1;
            transform: translateY(-2px);
        }

        /* 热门话题标签动画 */
        .topic-tag {
            transition: all 0.3s ease;
        }

        .topic-tag:hover {
            background: rgba(65, 105, 225, 0.4);
            transform: translateY(-2px);
        }

        /* 评论输入框动画 */
        .comment-input {
            transition: all 0.3s ease;
        }

        .comment-input:focus {
            border-color: #4169E1;
            box-shadow: 0 0 10px rgba(65, 105, 225, 0.1);
        }

        /* 修改帖子卡片的动画样式 */
        .post-card {
            opacity: 0;
            transform: translateX(-100px);
            transition: all 0.8s ease;
        }

        .post-card.visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* 为每个帖子添加不同的延迟时间 */
        .post-card:nth-child(1) {
            transition-delay: 0.2s;
        }

        .post-card:nth-child(2) {
            transition-delay: 1s;
        }

        .post-card:nth-child(3) {
            transition-delay: 1.8s;
        }

        /* 修改帖子内容的显示 */
        .post-content {
            color: #333;
            line-height: 1.8;
            font-size: 1.1em;
            padding: 20px 0;
            white-space: pre-line; /* 保持文本格式 */
        }

        .post-content br {
            margin-bottom: 10px;
        }

        /* 确保按钮在容器中垂直居中 */
        .post-actions {
            min-height: 45px;
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <img src="./logo/logo.PNG" alt="Logo" class="logo-img">
            </div>
            <ul class="nav-links">
                <li><a href="index.html">首页</a></li>
                <li><a href="about.html">关于我们</a></li>
                <li><a href="forum.html">交流论坛</a></li>
                <li><a href="contact.html">联系我们</a></li>
            </ul>
        </nav>
    </header>

    <div class="forum-page">
        <div class="forum-container">
            <div class="forum-header">
                <h1>留学交流论坛</h1>
                <div class="forum-tools">
                    <div class="search-box">
                        <input type="text" placeholder="搜索帖子...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button class="new-post-btn" onclick="openNewPostModal()">
                        <i class="fas fa-plus"></i> 发布新帖子
                    </button>
                </div>
            </div>

            <div class="forum-filters">
                <div class="filter-group">
                    <span class="filter-label">分类：</span>
                    <div class="filter-options">
                        <button class="filter-btn active">全部</button>
                        <button class="filter-btn">申请经验</button>
                        <button class="filter-btn">院校信息</button>
                        <button class="filter-btn">签证问题</button>
                        <button class="filter-btn">生活交流</button>
                    </div>
                </div>
                <div class="filter-group">
                    <span class="filter-label">排序：</span>
                    <select class="sort-select">
                        <option value="latest">最新发布</option>
                        <option value="hot">最热门</option>
                        <option value="most-commented">评论最多</option>
                    </select>
                </div>
            </div>

            <!-- 添加热门话题区域 -->
            <div class="hot-topics">
                <h2>热门话题</h2>
                <div class="topic-tags">
                    <span class="topic-tag"># 哈佛申请</span>
                    <span class="topic-tag"># 雅思备考</span>
                    <span class="topic-tag"># 签证面试</span>
                    <span class="topic-tag"># 留学费用</span>
                    <span class="topic-tag"># 选校建议</span>
                </div>
            </div>

            <!-- 修改帖子列表布局 -->
            <div class="forum-content">
                <!-- 左侧帖子列表 -->
                <div class="posts-section">
                    <div class="post-list">
                        <!-- 示例帖子1 -->
                        <div class="post-card">
                            <div class="post-header">
                                <div class="post-author-info">
                                    <img src="./技师图片/Amy.PNG" alt="avatar" class="author-avatar">
                                    <div class="author-details">
                                        <h3 class="author-name">松之 刘</h3>
                                        <span class="post-date">2024-01-18</span>
                                    </div>
                                </div>
                                <div class="post-title-section">
                                    <h2 class="post-title">分享我的哈佛商学院申请经验</h2>
                                    <div class="post-tags">
                                        <span class="tag">哈佛大学</span>
                                        <span class="tag">商学院申请</span>
                                        <span class="tag">成功案例</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="post-content-wrapper" id="content-1">
                                <div class="post-content">
                                    作为一名成功申请到哈佛商学院的学生，我想分享一下我的申请经验：

                                    1. 学术背景准备：
                                    - 本科：北京大学金融学
                                    - GPA：3.9/4.0
                                    - GMAT：760
                                    - 托福：110

                                    2. 实习经历：
                                    - 高盛投资银行部实习
                                    - 某知名PE机构项目经理
                                    - 创业经验（科技领域）

                                    3. 申请要点：
                                    - 突出领导力经历
                                    - 强调跨文化交流能
                                    - 清晰的职业规划
                                    - 个性化文书写作
                                    - 面试准备充分

                                    4. 个人心得：
                                    - 提前规划，合理安排时间
                                    - 注重实践经验的积累
                                    - 保持良好的学术表现
                                    - 积极参与课外活动
                                    - 建立清晰的职业目标
                                </div>
                            </div>
                            
                            <div class="post-actions">
                                <button class="action-btn like-btn">
                                    <i class="far fa-heart"></i>
                                    <span>238 赞</span>
                                </button>
                                <button class="action-btn comment-btn">
                                    <i class="far fa-comment"></i>
                                    <span>56 评论</span>
                                </button>
                                <button class="action-btn share-btn">
                                    <i class="far fa-share-square"></i>
                                    <span>分享</span>
                                </button>
                            </div>
                        </div>

                        <!-- 示例帖子2 -->
                        <div class="post-card">
                            <div class="post-header">
                                <div class="post-author-info">
                                    <img src="./技师图片/Jack.PNG" alt="avatar" class="author-avatar">
                                    <div class="author-details">
                                        <h3 class="author-name">子睿白</h3>
                                        <span class="post-date">2024-01-19</span>
                                    </div>
                                </div>
                                <div class="post-title-section">
                                    <h2 class="post-title">MIT计算机科学系申请经验总结</h2>
                                    <div class="post-tags">
                                        <span class="tag">MIT</span>
                                        <span class="tag">计算机科学</span>
                                        <span class="tag">申请技巧</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="post-content-wrapper" id="content-2">
                                <div class="post-content">
                                    MIT CS申请经验分享：

                                    1. 核心竞力：
                                    - 扎实的数学和编程基础
                                    - 优秀的科研经历
                                    - 创新项目开发经验
                                    - 高水平论文发表
                                    - 竞赛获奖经历

                                    2. 重要准备材料：
                                    - 个人陈述要突出对CS的热情
                                    - 研究计划要具体可行
                                    - 推荐信要突出技术实力
                                    - 作品集展示项目经验
                                    - GRE成绩要有竞争力

                                    3. 面试准备：
                                    - 准备项目演示
                                    - 熟悉最新技术趋势
                                    - 准备英文技术交流
                                    - 模拟面试练习
                                    - 准备研究方向讨论

                                    4. 申请建议：
                                    - 注重科研经历积累
                                    - 参与开源项目贡献
                                    - 保持与导师沟通
                                    - 关注学术前沿动态
                                    - 展现创新思维能力
                                </div>
                            </div>
                            
                            <div class="post-actions">
                                <button class="action-btn like-btn">
                                    <i class="far fa-heart"></i>
                                    <span>186 赞</span>
                                </button>
                                <button class="action-btn comment-btn">
                                    <i class="far fa-comment"></i>
                                    <span>42 评论</span>
                                </button>
                                <button class="action-btn share-btn">
                                    <i class="far fa-share-square"></i>
                                    <span>分享</span>
                                </button>
                            </div>
                        </div>

                        <!-- 示例帖子3 -->
                        <div class="post-card">
                            <div class="post-header">
                                <div class="post-author-info">
                                    <img src="./技师图片/Sarah.PNG" alt="avatar" class="author-avatar">
                                    <div class="author-details">
                                        <h3 class="author-name">大项 羽</h3>
                                        <span class="post-date">2024-01-18</span>
                                    </div>
                                </div>
                                <div class="post-title-section">
                                    <h2 class="post-title">2024年最新美国留学签证攻略</h2>
                                    <div class="post-tags">
                                        <span class="tag">签证申请</span>
                                        <span class="tag">实用指南</span>
                                        <span class="tag">美国留学</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="post-content-wrapper" id="content-3">
                                <div class="post-content">
                                    最新美国留学签证申请要点：

                                    1. 材料准备清单：
                                    - 最新版DS-160表格填写指南
                                    - 财务证明要求更新
                                    - SEVIS缴费新规定
                                    - I-20表格要求
                                    - 护照有效期要求

                                    2. 面签技巧：
                                    - 最新面签流程介绍
                                    - 常见问题及答案示例
                                    - 着装及礼仪建议
                                    - 英语口语准备
                                    - 材料整理顺序

                                    3. 注意事项：
                                    - 疫情相关新政策
                                    - 签证预约系统使用指南
                                    - 特殊情况处理方法
                                    - 签证类型选择
                                    - 时间规划建议

                                    4. 实用议：
                                    - 提前准备所需材料
                                    - 保持材料的一致性
                                    - 注意签证时效性
                                    - 关注政策更新
                                    - 准备应急方案
                                </div>
                            </div>
                            
                            <div class="post-actions">
                                <button class="action-btn like-btn">
                                    <i class="far fa-heart"></i>
                                    <span>325 赞</span>
                                </button>
                                <button class="action-btn comment-btn">
                                    <i class="far fa-comment"></i>
                                    <span>89 评论</span>
                                </button>
                                <button class="action-btn share-btn">
                                    <i class="far fa-share-square"></i>
                                    <span>分享</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右侧发按钮 -->
                <div class="post-button-section">
                    <button class="create-post-btn" onclick="openNewPostModal()">
                        <i class="fas fa-plus"></i>
                        <span>发帖</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加发帖模态框 -->
    <div id="postModal" class="post-modal">
        <div class="post-modal-content">
            <span class="close">&times;</span>
            <h2>发布新帖子</h2>
            <div class="post-form">
                <div class="tag-selection">
                    <span>选择话题：</span>
                    <button class="tag-btn">申请经验</button>
                    <button class="tag-btn">院校信息</button>
                    <button class="tag-btn">签证问题</button>
                    <button class="tag-btn">生活交流</button>
                    <button class="tag-btn">语言考试</button>
                </div>
                <input type="text" placeholder="请输入标题（建议简明扼要）" class="post-title">
                <textarea placeholder="分享你的经验和建议...

建议包含以下内容：
1. 具体的背景和情况
2. 遇到的问题和挑战
3. 解决方案和建议
4. 个人心得体会" class="post-content"></textarea>
                <div class="post-actions">
                    <button class="preview-btn">预览</button>
                    <button class="publish-btn">发布</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 存储帖子的数组
        let posts = [];

        // 初始化页面
        document.addEventListener('DOMContentLoaded', () => {
            // 从localStorage加载帖子
            const savedPosts = localStorage.getItem('forumPosts');
            if (savedPosts) {
                posts = JSON.parse(savedPosts);
                renderPosts();
            }

            // 添加表单提交事件监听
            document.getElementById('postForm').addEventListener('submit', handleNewPost);
        });

        // 打开发帖模态框
        function openNewPostModal() {
            document.getElementById('newPostModal').style.display = 'block';
        }

        // 关闭发帖模态框
        function closeNewPostModal() {
            document.getElementById('newPostModal').style.display = 'none';
        }

        // 处理新帖子提交
        function handleNewPost(e) {
            e.preventDefault();
            
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            const newPost = {
                id: Date.now(),
                title,
                content,
                author: 'Anonymous',
                date: new Date().toLocaleString(),
                likes: 0,
                comments: [],
            };

            posts.unshift(newPost);
            localStorage.setItem('forumPosts', JSON.stringify(posts));
            
            renderPosts();
            closeNewPostModal();
            document.getElementById('postForm').reset();
        }

        // 渲染帖子列表
        function renderPosts() {
            const postList = document.getElementById('postList');
            postList.innerHTML = posts.map(post => `
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-author-info">
                            <img src="path/to/avatar.jpg" alt="avatar" class="author-avatar">
                            <div class="author-details">
                                <h3 class="author-name">${post.author}</h3>
                                <span class="post-date">${post.date}</span>
                            </div>
                        </div>
                        <div class="post-title-section">
                            <h2 class="post-title">${post.title}</h2>
                            <div class="post-tags">
                                <span class="tag">哈佛大学</span>
                                <span class="tag">申请经验</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="post-content-wrapper" id="content-${post.id}">
                        <div class="post-content">${post.content}</div>
                        <div class="post-content-fade"></div>
                    </div>
                    
                    <div class="post-actions">
                        <button class="action-btn like-btn" onclick="likePost(${post.id})">
                            <i class="far fa-heart"></i>
                            <span>${post.likes} 赞</span>
                        </button>
                        <button class="action-btn comment-btn" onclick="toggleComments(${post.id})">
                            <i class="far fa-comment"></i>
                            <span>${post.comments.length} 评论</span>
                        </button>
                        <button class="action-btn share-btn">
                            <i class="far fa-share-square"></i>
                            <span>分享</span>
                        </button>
                    </div>

                    <div class="comments-section" id="comments-${post.id}">
                        <div class="comments-list">
                            ${renderComments(post.comments)}
                        </div>
                        <div class="comment-form">
                            <img src="path/to/user-avatar.jpg" alt="Your avatar" class="user-avatar">
                            <div class="comment-input-wrapper">
                                <input type="text" class="comment-input" placeholder="写下你的评论..." onkeypress="handleComment(event, ${post.id})">
                                <button class="send-comment-btn" onclick="submitComment(${post.id})">
                                    <i class="far fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 渲染评论
        function renderComments(comments) {
            return comments.map(comment => `
                <div class="comment">
                    <div class="comment-header">
                        <span>${comment.author}</span>
                        <span>${comment.date}</span>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                </div>
            `).join('');
        }

        // 添加内容折叠/展开功能
        function toggleContent(postId) {
            const contentWrapper = document.getElementById(`content-${postId}`);
            const expandBtn = contentWrapper.nextElementSibling;
            const isExpanded = contentWrapper.classList.toggle('expanded');
            expandBtn.querySelector('span').textContent = isExpanded ? '收起' : '展开阅读';
        }

        // 修改评论切换功能
        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            commentsSection.classList.toggle('show');
        }

        // 添加点赞动画效果
        function likePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.likes++;
                const likeBtn = document.querySelector(`[onclick="likePost(${postId})"]`);
                likeBtn.classList.add('liked');
                setTimeout(() => likeBtn.classList.remove('liked'), 1000);
                localStorage.setItem('forumPosts', JSON.stringify(posts));
                renderPosts();
            }
        }

        // 理评论提交
        function handleComment(event, postId) {
            if (event.key === 'Enter') {
                const input = event.target;
                const content = input.value.trim();
                
                if (content) {
                    const post = posts.find(p => p.id === postId);
                    if (post) {
                        post.comments.push({
                            author: 'Anonymous',
                            content,
                            date: new Date().toLocaleString()
                        });
                        
                        localStorage.setItem('forumPosts', JSON.stringify(posts));
                        renderPosts();
                        toggleComments(postId);
                    }
                    input.value = '';
                }
            }
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            const modal = document.getElementById('newPostModal');
            if (event.target === modal) {
                closeNewPostModal();
            }
        }

        // 提交评论的函数
        function submitComment(postId) {
            const commentInput = document.querySelector(`#comments-${postId} .comment-input`);
            const content = commentInput.value.trim();
            
            if (content) {
                const post = posts.find(p => p.id === postId);
                if (post) {
                    const newComment = {
                        id: Date.now(),
                        author: {
                            name: 'Current User',
                            avatar: 'path/to/user-avatar.jpg'
                        },
                        content: content,
                        date: new Date().toLocaleString(),
                        likes: 0
                    };
                    
                    post.comments.push(newComment);
                    localStorage.setItem('forumPosts', JSON.stringify(posts));
                    
                    // 立即渲染新评论
                    const commentsList = document.querySelector(`#comments-${postId} .comments-list`);
                    commentsList.appendChild(createCommentElement(newComment));
                    
                    // 清空输入框
                    commentInput.value = '';
                    
                    // 更新评论计数
                    updateCommentCount(postId);
                }
            }
        }

        // 创建评论元素
        function createCommentElement(comment) {
            const commentDiv = document.createElement('div');
            commentDiv.className = 'comment';
            commentDiv.innerHTML = `
                <img src="${comment.author.avatar}" alt="${comment.author.name}" class="user-avatar">
                <div class="comment-content">
                    <div class="comment-author">
                        <span class="author-name">${comment.author.name}</span>
                        <span class="comment-date">${comment.date}</span>
                    </div>
                    <p>${comment.content}</p>
                    <div class="comment-actions">
                        <button class="action-btn" onclick="likeComment(${comment.id})">
                            <i class="far fa-heart"></i>
                            <span>${comment.likes}</span>
                        </button>
                        <button class="action-btn" onclick="replyToComment(${comment.id})">
                            <i class="far fa-comment"></i>
                            <span>回复</span>
                        </button>
                    </div>
                </div>
            `;
            return commentDiv;
        }

        // 更新评论计数
        function updateCommentCount(postId) {
            const post = posts.find(p => p.id === postId);
            const commentCountElement = document.querySelector(`[onclick="toggleComments(${postId})"] span`);
            commentCountElement.textContent = `${post.comments.length} 评论`;
        }

        // 标签选择
        function selectTag(element) {
            element.classList.toggle('selected');
        }

        // 文本格式化
        function formatText(command) {
            const textarea = document.getElementById('postContent');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            let formattedText = '';
            switch(command) {
                case 'bold':
                    formattedText = `**${selectedText}**`;
                    break;
                case 'italic':
                    formattedText = `*${selectedText}*`;
                    break;
                case 'list':
                    formattedText = `\n- ${selectedText}`;
                    break;
            }
            
            textarea.value = textarea.value.substring(0, start) + formattedText + textarea.value.substring(end);
        }

        // 添加片
        function addImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    // 这里可以添加图片上传逻辑
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const textarea = document.getElementById('postContent');
                        textarea.value += `\n![图片](${e.target.result})\n`;
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // 预览帖子
        function previewPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const selectedTags = Array.from(document.querySelectorAll('.tag-option.selected'))
                .map(tag => tag.textContent);
            
            const previewContent = document.getElementById('previewContent');
            previewContent.innerHTML = `
                <h3>${title}</h3>
                <div class="post-tags">
                    ${selectedTags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="post-content">${content}</div>
            `;
            
            document.getElementById('previewModal').style.display = 'block';
        }

        // 关闭预览
        function closePreviewModal() {
            document.getElementById('previewModal').style.display = 'none';
        }

        // 获取模态框元素
        const postModal = document.getElementById('postModal');
        const closeBtn = document.getElementsByClassName('close')[0];

        // 点击发帖按钮打开模态框
        document.querySelector('.create-post-btn').onclick = function() {
            postModal.style.display = 'block';
        }

        // 点击关闭按钮关闭模态框
        closeBtn.onclick = function() {
            postModal.style.display = 'none';
        }

        // 点击模态框外部关闭模态框
        window.onclick = function(event) {
            if (event.target == postModal) {
                postModal.style.display = 'none';
            }
        }

        // 标签选择功能
        document.querySelectorAll('.tag-btn').forEach(btn => {
            btn.onclick = function() {
                this.classList.toggle('active');
            }
        });

        // 修改滚动动画处理函数
        function handleScrollAnimation() {
            const posts = document.querySelectorAll('.post-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // 添加延迟时间
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 800); // 每个帖子之间间隔800ms（0.8秒）
                    } else {
                        // 当帖子离开视图时，移除 visible 类，这样当它再次进入视图时会重新触发动画
                        entry.target.classList.remove('visible');
                    }
                });
            }, {
                threshold: 0.2,
                rootMargin: '0px'
            });
            
            posts.forEach(post => {
                observer.observe(post);
            });
        }

        // 页面加载时初始化动画
        document.addEventListener('DOMContentLoaded', () => {
            handleScrollAnimation();
        });

        // 优化动画性能
        document.querySelectorAll('.post-card').forEach(card => {
            card.addEventListener('animationend', () => {
                card.style.opacity = '1';
                card.style.transform = 'none';
            });
        });
    </script>
</body>
</html> 